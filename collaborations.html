<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Collaborations — Laura Díaz Sáez Lab</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Your styles -->
  <link rel="stylesheet" href="assets/site.css?v=1100">

  <!-- Leaflet CSS (map library) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <style>
    /* Map needs an explicit height */
    #map { height: 520px; border-radius: 16px; }
    /* Left-align content below your centered hero */
    .content-wrap { text-align: left; }
  </style>
</head>
<body class="text-center inner-page">
<div class="cover-container p-3 mx-auto flex-column">

    <!-- Header -->
    <header class="mb-auto text-center">
      <h3 class="mb-3">Antimicrobial Discovery Lab</h3>
      <nav class="nav nav-masthead justify-content-center">
        <a class="nav-link fw-semibold" href="index.html">Home</a>
        <a class="nav-link fw-semibold" href="research.html">Research</a>
        <a class="nav-link fw-semibold active" aria-current="page" href="collaborations.html">Collaborations</a>
        <a class="nav-link fw-semibold" href="people.html">People</a>
        <a class="nav-link fw-semibold" href="publications.html">Publications</a>
        <a class="nav-link fw-semibold" href="join.html">Join us</a>
      </nav>
    </header>

    <!-- Hero -->
    <main class="px-3">
      <h1 class="display-4 text-center mb-5">Collaborators</h1>
      <p class="lead mb-4">Explore our collaborators network. Click a dot to see details.</p>
    </main>

    <!-- Map + list -->
    <section class="container content-wrap pb-5">
      <div id="map" class="mb-4"></div>

      <!-- (Optional) simple list underneath -->
      <h2 class="h4 mb-3">Current collaborators</h2>
      <ul id="collab-list" class="list-unstyled mb-0"></ul>
    </section>

  <!-- Footer like the example (acknowledging Cover template) -->
    <footer class="mt-auto text-white-50">
      <p class="mb-1">Cover template for <a href="https://getbootstrap.com" target="_blank" rel="noopener">Bootstrap</a>.</p>
      <p class="mb-0"> <span id="year"></span> Laura Díaz Sáez Research Group</p>
    </footer>
  </div>

  <!-- Bootstrap JS (optional, but small and handy) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // 1) Edit this array with your collaborators
    // tip to find coordinates: in Google Maps, right-click a place → “What’s here?” → copy lat,lng
    const collaborators = [
      {
        name: "Prof. Christopher G. Dowson",
        institution: "University of Warwick",
        city: "Coventry, UK",
        link: "https://warwick.ac.uk/fac/sci/lifesci/people/cdowson/",
        lat: 52.3753, lng: -1.5528
      },
      {
        name: "Antimicrobial Screening facility",
        institution: "University of Warwick",
        city: "Coventry, UK",
        link: "https://warwick.ac.uk/fac/cross_fac/amrscreening/",
        lat: 52.3755, lng: -1.5523
      },
      {
        name: "Prof. Matthew Todd",
        institution: "University College London",
        city: "London, UK",
        link: "https://profiles.ucl.ac.uk/69510-matthew-todd",
        lat: 51.5084, lng: -0.1249
      },
      {
        name: "Dr. Lori Ferrins",
        institution: "Northeastern University",
        city: "Boston, USA",
        link: "https://bouve.northeastern.edu/directory/lori-ferrins/",
        lat: 42.3601, lng: -71.0942
      },
      {
        name: "Dr Bart Staker, SSGCID",
        institution: "Seatle Structural Genomics Consortium for Infectious Diseases",
        city: "Seatlle, USA",
        link: "https://www.ssgcid.org/",
        lat: 47.6057, lng: -122.3408
      },
      {
        name: "Dr. David Stirling",
        institution: "Katalytic Therapeutics",
        city: "New Jersey, USA",
        link: "https://www.biotheryx.com/",
        lat: 40.7334, lng: -74.1732
      },
      {
        name: "Dr Kyle Chan, Dr Normand Richard, Dr Cathy Swindlehurst teams",
        institution: "Katalytic Therapeutics",
        city: "San Diego, USA",
        link: "https://www.biotheryx.com/",
        lat: 32.7152, lng: -117.1688
      },
      {
        name: "Biacore",
        institution: "Cytiva",
        city: "Uppsala, Sweden",
        link: "https://www.cytivalifesciences.com/",
        lat: 59.8592, lng: 17.6440
      },
      {
        name: "Phillip Stansfeld",
        institution: "University of Warwick",
        city: "Coventry, UK",
        link: "https://stansfeldresearchgroup.wordpress.com/",
        lat: 52.3749, lng: -1.5519
      },
      {
        name: "Dr. Andrew Lewis",
        institution: "Manchester Metropolitan University",
        city: "Manchester, UK",
        link: "https://www.mmu.ac.uk/staff/profile/dr-andrew-lewis#t-tabs_staff_profile-0",
        lat: 53.4704, lng: -2.2385
      },
      {
        name: "Bicycle Therapeutics",
        institution: "Bicycle Therapeutics",
        city: "Cambridge, UK",
        link: "https://www.bicycletherapeutics.com/",
        lat: 52.1166, lng: 0.2207
      },
      {
        name: "Inés Muñoz",
        institution: "Centro Nacional de Investigaciones Oncológicas (CNIO)",
        city: "Madrid, Spain",
        link: "https://www.cnio.es/",
        lat: 40.4770, lng: -3.6919
      }
    ];

    // 2) Create map (dark tiles to match your theme)
    const map = L.map('map', { worldCopyJump: true });
    const tiles = L.tileLayer(
      'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',
      {
        maxZoom: 19,
        attribution: '&copy; OpenStreetMap &copy; CARTO',
        subdomains: 'abcd'
      }
    ).addTo(map);

      // 3) Add markers + popups (keyed by unique id)
    const markersById = {};
    collaborators.forEach((c, i) => {
      const marker = L.circleMarker([c.lat, c.lng], {
        radius: 8,                // size of circle
        color: "#cb7743",         // outline color
        fillColor: "#cb7743",     // fill color
        fillOpacity: 0.9,         // opacity (1 = solid)
        weight: 2                 // outline thickness
      }).addTo(map);
      const popupHtml = `
        <strong>${c.institution}</strong><br>
        ${c.name}<br>
        <small>${c.city}</small><br>
        ${c.link ? `<a href="${c.link}" target="_blank" rel="noopener">Website</a>` : ""}
      `;
      marker.bindPopup(popupHtml);
      markersById[i] = marker;          // key by index, not institution
    });

    // 4) Fit map to all markers (fallback to world view if none)
    if (Object.keys(markersById).length) {
      const group = L.featureGroup(Object.values(markersById));
      map.fitBounds(group.getBounds().pad(0.2));
    } else {
      map.setView([20, 0], 2);
    }

    // 5) Render clickable collaborator list (Name first) with data-id
    const list = document.getElementById('collab-list');
    list.innerHTML = collaborators.map((c, i) => `
      <li class="mb-2">
        • <a href="#" class="link-light text-decoration-underline collab-link"
             data-id="${i}">
             <strong>${c.name}</strong>
        </a> — ${c.institution} (${c.city})
      </li>
    `).join("");

    // 6) When list item is clicked → fly to marker and open popup
    list.addEventListener('click', e => {
      const link = e.target.closest('.collab-link');
      if (!link) return;
      e.preventDefault();

      const id = link.dataset.id;
      const m = markersById[id];
      if (!m) return;

      const latLng = m.getLatLng();
      map.closePopup();
      map.flyTo(latLng, 9, { animate: true, duration: 1.5 });

      setTimeout(() => m.openPopup(), 1200);
    });



  </script>
</body>
</html>
